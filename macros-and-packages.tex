%AMS packages - Symbols, "Theorem" and "Proof" Environments
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{physics}
\renewcommand{\div}{\tn{div}~}

% Nicer Headers and Footers
\usepackage{fancyhdr}
\usepackage[yyyymmdd]{datetime}
\renewcommand{\dateseparator}{-}

% Table of Contents
\usepackage[titles]{tocloft}
\usepackage[titletoc]{appendix}

% Tikz and Graphics
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{xcolor}
\usepackage[many]{tcolorbox}

% Nicer Underlining
\usepackage{contour}
\usepackage{ulem}

% Multiple Text Columns
\usepackage{multicol}

% FloatBarrier
\usepackage{placeins} 

% hyperref should be last apparently
\usepackage{hyperref}

%--- RENEWED COMMANDS ---

% Variant Greek Letters
\renewcommand\epsilon{\varepsilon}
\renewcommand\phi{\varphi}

% Nicer Table of Contents
\renewcommand\cftsecdotsep{\cftdot}
\renewcommand\cftsubsecdotsep{\cftdot}

%--- TEXT FORMATING ---

% nice underlining
\renewcommand{\ULdepth}{1.6pt}
\contourlength{0.8pt}
\newcommand{\ul}[1]{%
	\uline{\phantom{#1}}%
	\llap{\contour{white}{#1}}%
}

% shorthand
\newcommand{\tn}[1]{\textnormal{#1}}
\newcommand{\tbf}[1]{\textbf{#1}}
\newcommand{\tit}[1]{\textit{#1}}
\newcommand{\ttt}[1]{\texttt{#1}}

\newcommand{\mc}[1]{\mathcal{#1}}

\newcommand{\ol}[1]{\overline{{#1}}}

% Underlined, bold, non-cursive Theorem Name
\newcommand{\theoremname}[1]{\ul{\textnormal{\tbf{#1}}}}

% Starts a new paragraph without indentation
% and with an empty line between paragraphs
\newcommand*{\newpar}{\par\vspace{\baselineskip}\noindent}

% Make inf height match sup height
\renewcommand{\inf}{\mathop{\mathrm{inf}\vphantom{\mathrm{sup}}}}

% Make tildes more readable
\renewcommand{\tilde}{\widetilde}

%--- RELATION SYMBOLS AND OPERATORS ---
\newcommand{\surj}{\twoheadrightarrow}
\newcommand{\inj}{\hookrightarrow}
\newcommand{\iso}{\overset{\sim}{\rightarrow}}
\newcommand{\symdiff}{\vartriangle}
\newcommand{\trans}{\twoheadrightarrow}
\newcommand{\tensor}{\otimes}
\newcommand{\bigmid}{~\middle|~}

%--- STUFF IN FANCY BRACKETS ---
\newcommand{\scalar}[2]{\left\langle #1, #2 \right\rangle}
\newcommand{\angles}[1]{\left\langle #1 \right\rangle}
\newcommand{\lr}{\qty}


%--- LETTERS ---
\newcommand{\dmu}{\ d\mu}
\newcommand{\dist}{\textnormal{dist}}
\newcommand{\spt}{\textnormal{spt}}

% mathbb
\newcommand{\bC}{\mathbb{C}}
\newcommand{\bF}{\mathbb{F}}
\newcommand{\bN}{\mathbb{N}}
\newcommand{\bQ}{\mathbb{Q}}
\newcommand{\bR}{\mathbb{R}}
\newcommand{\bZ}{\mathbb{Z}}

% mathcal
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cH}{\mathcal{H}}
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cQ}{\mathcal{Q}}
\newcommand{\cR}{\mathcal{R}}
\newcommand{\cS}{\mathcal{S}}
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cW}{\mathcal{W}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cZ}{\mathcal{Z}}

% mathfrac
\newcommand{\fa}{\mathfrak{a}}

% real numbers in fancy costumes
\newcommand{\barR}{\ol{\mathbb{R}}}
\newcommand{\bRnn}{\mathbb{R}^{n \times n}}
\newcommand{\bRmn}{\mathbb{R}^{m \times n}}
\newcommand{\bRnm}{\mathbb{R}^{n \times m}}

% vectors
\renewcommand{\va}{\vec{a}}
\renewcommand{\vb}{\vec{b}}
\newcommand{\vc}{\vec{c}}
\newcommand{\ve}{\vec{e}}
\newcommand{\vF}{\vec{F}}
\newcommand{\vh}{\vec{h}}
\newcommand{\vp}{\vec{p}}
\newcommand{\vr}{\vec{r}}
\newcommand{\vs}{\vec{s}}
\newcommand{\vT}{\vec{T}}
\renewcommand{\vu}{\vec{u}}
\newcommand{\vv}{\vec{v}}
\newcommand{\vw}{\vec{w}}
\newcommand{\vW}{\vec{W}}
\newcommand{\vx}{\vec{x}}
\newcommand{\vy}{\vec{y}}
\newcommand{\vz}{\vec{z}}
\newcommand{\vzero}{\vec{0}}

\newcommand{\veta}{\vec{\eta}}

\renewcommand{\grad}{\vec{\nabla}}

% bold letters
\newcommand{\tbA}{\mathbf{A}}
\newcommand{\tbB}{\mathbf{B}}
\newcommand{\tbC}{\mathbf{C}}
\newcommand{\tbD}{\mathbf{D}}
\newcommand{\tbE}{\mathbf{E}}
\newcommand{\tbY}{\mathbf{Y}}
\newcommand{\tbZ}{\mathbf{Z}}

% sequences
\newcommand{\an}{(a_n)_{n \in \bN}}
\newcommand{\bn}{(b_n)_{n \in \bN}}
\newcommand{\sn}{(s_n)_{n \in \bN}}
\newcommand{\iinI}{_{i \in I}}
\newcommand{\iinN}{_{i \in \bN}}

% special functions
\newcommand{\at}{\textnormal{at}}
\newcommand{\ggT}{\textnormal{ggT}}
\newcommand{\kgV}{\textnormal{kgV}}
\newcommand{\id}{\textnormal{id}}
\newcommand{\Id}{\textnormal{Id}}
\newcommand{\im}{\textnormal{im}}
\newcommand{\inv}{\textnormal{inv}}
\newcommand{\ord}{\textnormal{ord}\ }
\newcommand{\rang}{\textnormal{rang}\ }
\renewcommand{\tr}{\textnormal{tr}\ }
\newcommand{\vol}{\textnormal{vol}}
\newcommand{\cond}{\textnormal{cond}}
\newcommand{\sgn}{\textnormal{sgn}}
\renewcommand{\char}{\textnormal{char}}
\newcommand{\Frac}{\textnormal{Frac}}
\newcommand{\Irr}{\textnormal{Irr}}

% groups and sets
\newcommand{\GL}{\text{GL}}
\newcommand{\SO}{\text{SO}}
\newcommand{\Hess}[1]{\text{Hess}(#1)}

\newcommand{\Grp}{\textnormal{Grp}}
\newcommand{\Mag}{\textnormal{Mag}}
\newcommand{\Mon}{\textnormal{Mon}}
\newcommand{\Ens}{\textnormal{Ens}}
\newcommand{\Hom}{\textnormal{Hom}}
\newcommand{\Aut}{\textnormal{Aut}}

\newcommand{\Mat}{\textnormal{Mat}}
\newcommand{\Matnn}{\textnormal{Mat}(n \times n)}
\newcommand{\MatBB}[3]{\textnormal{Mat}^{#1}_{#2}\left(#3\right)}



% --- THEOREM AND PROOF TYPES ---
% \newtheorem{codename}{printedname}[countedwith]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{theorem}[lemma]{Satz}
\newtheorem{proposition}[lemma]{Proposition}
\newtheorem{corollary}[lemma]{Korollar}

\theoremstyle{definition}
\newtheorem{definition}[lemma]{Definition}
\newtheorem{summary}[lemma]{Zusammenfassung}
\newtheorem{example}[lemma]{Beispiel}
\newtheorem{counterexample}[lemma]{Gegenbeispiel}
\newtheorem{beobachtung}[lemma]{Beobachtung}
\newtheorem{anmerkung}[lemma]{Anmerkung}
\newtheorem{question}[lemma]{Frage}
\newtheorem{application}[lemma]{Anwendung}
\newtheorem{reminder}[lemma]{Erinnerung}
\newtheorem{konsequenz}[lemma]{Konsequenz}

% --- CUSTOM ENVIRONMENTS ---

% sketchy proofs marked with untrustworthy QED symbol
\newenvironment{proofsketch}{\begin{proof}[Beweisskizze]\renewcommand*{\qedsymbol}{\("\square"\)}}{\end{proof}}

% align with exactly one number for labeling
\NewDocumentEnvironment{nalign}{}{\equation\aligned}{\endaligned\endequation}

\makeatletter
\let\amsmath@bigm\bigm